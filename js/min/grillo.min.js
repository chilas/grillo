!function(window){var _comps={},_utils={},_config={},channels={},hOP=channels.hasOwnProperty,isFunction=function(fn){var getType={};return fn&&"[object Function]"===getType.toString.call(fn)},init_comp=function(comp,scope){return _comps.hasOwnProperty(comp)?_comps[comp](scope).init.apply(_comps[comp],[]):void 0};GrilloException=function(message){this.name="GrilloException",this.message=message||"An error has occurred."},GrilloException.prototype=Object.create(Error.prototype),GrilloException.prototype.constructor=GrilloException,window.grillo={init:function(){for(var comp in _comps)init_comp(comp,this)},comps:_comps,utils:_utils,config:_config,addComponent:function(compName,compDeps,compFn){if(isFunction(compDeps)&&(compFn=compFn||compDeps,compDeps=[]),_comps.hasOwnProperty(compName))throw new GrilloException("Already defined a component as: "+compName);return _comps[compName]=compFn,_config[compName]={},this},addUtility:function(utilName,utilDeps,utilFn){if(isFunction(utilDeps)&&(utilFn=utilFn||utilDeps,utilDeps=[]),_utils.hasOwnProperty(utilName))throw new GrilloException("Already defined a utility as: "+utilName);return _utils[utilName]=utilFn,_config[utilName]={},this[utilName]=utilFn(this),this},require:{},getAttr:function(){},publish:function(channel,data){if(hOP.call(channels,channel)){for(data=data||{},lenListeners=channels[channel].length,i=0;i<lenListeners;i++)channels[channel][i]&&channels[channel][i](data);return this}},subscribe:function(channel,listener){hOP.call(channels,channel)||(channels[channel]=[]);var index=channels[channel].push(listener)-1;return{remove:function(){delete channels[channel][index]}}}}}(this,document);